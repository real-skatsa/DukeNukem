<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chris's 40th â€“ DNKROZ Console</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --green: #00ff66;
    --gold:  #ffcc00;
    --red:   #ff0033;
    --bg:    #000000;
  }
  html, body { height: 100%; }
  body {
    margin: 0;
    background: var(--bg);
    color: var(--green);
    font-family: "Courier New", monospace;
    font-size: 18px;
    line-height: 1.6;
    padding: 40px;
  }
  pre {
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
    text-shadow: 0 0 6px rgba(0,255,102,0.4);
  }
  .cursor { animation: blink 1s steps(1) infinite; }
  @keyframes blink { 50% { opacity: 0; } }

  .gold {
    color: var(--gold);
    text-shadow: 0 0 8px rgba(255,204,0,0.6);
    font-weight: bold;
  }
  .red {
    color: var(--red);
    font-weight: bold;
    text-shadow: 0 0 8px rgba(255,0,51,0.6);
  }

  .poster {
    display: block;
    margin: 24px auto;
    max-width: 45%;
    width: 350px;
    height: auto;
    border: 1px solid var(--green);
    box-shadow: 0 0 8px rgba(0,255,102,0.25);
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 900ms ease, transform 900ms ease;
  }
  .poster.show {
    opacity: 1;
    transform: translateY(0);
  }

  .bar-wrap {
    margin-top: 6px;
    width: 100%;
    max-width: 520px;
    border: 1px solid var(--green);
    padding: 2px;
    box-shadow: 0 0 8px rgba(0,255,102,0.25) inset;
  }
  .bar {
    height: 14px;
    width: 0%;
    background: var(--green);
    box-shadow: 0 0 8px rgba(0,255,102,0.65);
    transition: width 0.05s linear;
  }
  .pct {
    margin-top: 4px;
  }
</style>
</head>
<body>
<pre id="console"></pre>

<script>
const pre = document.getElementById("console");

function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

async function typeText(text, speed = 50) {
  for (let i = 0; i < text.length; i++) {
    pre.innerHTML += text[i];
    await sleep(speed);
  }
}

async function typeSpan(text, className, speed = 50) {
  const span = document.createElement("span");
  span.className = className;
  pre.appendChild(span);
  for (let i = 0; i < text.length; i++) {
    span.textContent += text[i];
    await sleep(speed);
  }
  return span;
}

async function newLine(delay = 400) {
  pre.innerHTML += "<br>";
  await sleep(delay);
}

function addProgressBar() {
  const wrap = document.createElement('div');
  const barWrap = document.createElement('div');
  const bar = document.createElement('div');
  const pct = document.createElement('div');
  barWrap.className = 'bar-wrap';
  bar.className = 'bar';
  pct.className = 'pct';
  wrap.appendChild(barWrap);
  barWrap.appendChild(bar);
  wrap.appendChild(pct);
  pre.appendChild(wrap);
  return { bar, pct };
}

async function progressBar() {
  const { bar, pct } = addProgressBar();
  const duration = 5000;
  const start = performance.now();

  await new Promise(resolve => {
    const step = (now) => {
      const t = Math.min(1, (now - start) / duration);
      const p = Math.round(t * 100);
      bar.style.width = p + "%";
      pct.textContent = " " + p + "%";
      if (t < 1) requestAnimationFrame(step);
      else resolve();
    };
    requestAnimationFrame(step);
  });
}

async function run() {
  // Fixed backslashes by escaping them (\\)
  await typeText("C:\\\\> cd duke3d");
  await newLine(); await newLine();

  await typeText("C:\\\\DUKE3D> duke3d.exe");
  await newLine(); await newLine();

  await typeText("Loading DUKE NUKEM 3D...");
  await progressBar();
  await newLine();

  await typeText("PLEASE ENTER CHEAT CODE:");
  await newLine();

  await typeSpan("> DNKROZ", "red");
  await newLine(); await newLine();

  await typeText("........");
  await newLine();
  await typeText("INITIALISING");
  await newLine();
  await typeText("........");
  await newLine(); await newLine();

  // Duke image
  const img = document.createElement("img");
  img.className = "poster";
  img.alt = "Duke Nukem";
  img.src = "https://images.pushsquare.com/e7d635fd31ff1/duke-nukem.300x.jpg";
  pre.appendChild(img);

  const goldPromise = typeSpan("> GOD MODE Activated for Chris's 40th Birthday", "gold", 60);

  await sleep(250);
  img.classList.add("show");

  await goldPromise;
  await newLine();

  const cursor = document.createElement("span");
  cursor.className = "cursor";
  cursor.textContent = "_";
  pre.appendChild(cursor);
}

run();
</script>
</body>
</html>
